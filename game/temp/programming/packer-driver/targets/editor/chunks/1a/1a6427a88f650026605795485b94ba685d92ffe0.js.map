{"version":3,"sources":["file:///D:/cocosProject/footBallGame/game/assets/controllers/stickControls/onTouchController/onTouchJump.ts"],"names":["_decorator","Component","Node","PlayerController","FootMotorController","ccclass","property","onTouchJump","playerController","touchLocationClone","footMotorController","boolean","start","node","on","EventType","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","TOUCH_CANCEL","onTouchCancel","player","getComponent","footMotorNode","event","touchLocation","getLocation","clone","offset","y","jumpMovement","rotateHeadTo90Degrees"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,I,OAAAA,I;;AACnCC,MAAAA,gB,iBAAAA,gB;;AACAC,MAAAA,mB,iBAAAA,mB;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;6BAGjBO,W,WADZF,OAAO,CAAC,aAAD,C,UAMHC,QAAQ,CAACJ,IAAD,C,UAERI,QAAQ,CAACJ,IAAD,C,2BARb,MACaK,WADb,SACiCN,SADjC,CAC2C;AAAA;AAAA;AAAA,eACvCO,gBADuC;AAAA,eAEvCC,kBAFuC;AAAA,eAGvCC,mBAHuC;;AAAA;;AAAA;;AAAA,eAiBvCC,OAjBuC,GAiB7B,KAjB6B;AAAA;;AASvCC,QAAAA,KAAK,GAAG;AACJ,eAAKC,IAAL,CAAUC,EAAV,CAAaZ,IAAI,CAACa,SAAL,CAAeC,WAA5B,EAAyC,KAAKC,YAA9C,EAA4D,IAA5D;AACA,eAAKJ,IAAL,CAAUC,EAAV,CAAaZ,IAAI,CAACa,SAAL,CAAeG,UAA5B,EAAwC,KAAKC,WAA7C,EAA0D,IAA1D;AACA,eAAKN,IAAL,CAAUC,EAAV,CAAaZ,IAAI,CAACa,SAAL,CAAeK,SAA5B,EAAuC,KAAKC,UAA5C,EAAwD,IAAxD;AACA,eAAKR,IAAL,CAAUC,EAAV,CAAaZ,IAAI,CAACa,SAAL,CAAeO,YAA5B,EAA0C,KAAKC,aAA/C,EAA8D,IAA9D;AACA,eAAKf,gBAAL,GAAwB,KAAKgB,MAAL,CAAYC,YAAZ;AAAA;AAAA,mDAAxB;AACA,eAAKf,mBAAL,GAA2B,KAAKgB,aAAL,CAAmBD,YAAnB;AAAA;AAAA,yDAA3B;AACH;;AAEDR,QAAAA,YAAY,CAACU,KAAD,EAAoB;AAC5B,cAAIC,aAAa,GAAGD,KAAK,CAACE,WAAN,EAApB,CAD4B,CACa;;AACzC,eAAKpB,kBAAL,GAA0BmB,aAAa,CAACE,KAAd,EAA1B;AAEH;;AAEDX,QAAAA,WAAW,CAACQ,KAAD,EAAoB;AAC3B,cAAIC,aAAa,GAAGD,KAAK,CAACE,WAAN,EAApB;AACA,cAAIE,MAAM,GAAGH,aAAa,CAACI,CAAd,GAAkB,KAAKvB,kBAAL,CAAwBuB,CAAvD;AACA,cAAG,KAAKrB,OAAR,EAAgB;;AAChB,cAAIoB,MAAM,GAAG,GAAb,EAAkB;AACd,iBAAKpB,OAAL,GAAe,IAAf;AACA,iBAAKH,gBAAL,CAAsByB,YAAtB;AACH;AACJ;;AAEDZ,QAAAA,UAAU,CAACM,KAAD,EAAoB;AAC1B,eAAKjB,mBAAL,CAAyBwB,qBAAzB;AACA,eAAKvB,OAAL,GAAe,KAAf;AAEH;;AAEDY,QAAAA,aAAa,CAACI,KAAD,EAAoB,CAChC;;AAzCsC,O","sourcesContent":["import { _decorator, Component, EventTouch, Node, Vec2 } from 'cc';\r\nimport { PlayerController } from '../../PlayerController';\r\nimport { FootMotorController } from '../../jointControls/FootMotorController';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('onTouchJump')\r\nexport class onTouchJump extends Component {\r\n    playerController: PlayerController;\r\n    touchLocationClone: Vec2;\r\n    footMotorController:FootMotorController;\r\n    \r\n    @property(Node)\r\n    player: Node;\r\n    @property(Node)\r\n    footMotorNode: Node;\r\n    start() {\r\n        this.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        this.node.on(Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n        this.node.on(Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this);\r\n        this.playerController = this.player.getComponent(PlayerController);\r\n        this.footMotorController = this.footMotorNode.getComponent(FootMotorController);\r\n    }\r\n    boolean = false;\r\n    onTouchStart(event: EventTouch) {\r\n        let touchLocation = event.getLocation(); // 获取触摸的屏幕坐标\r\n        this.touchLocationClone = touchLocation.clone();\r\n        \r\n    }\r\n\r\n    onTouchMove(event: EventTouch) {\r\n        let touchLocation = event.getLocation();\r\n        let offset = touchLocation.y - this.touchLocationClone.y;\r\n        if(this.boolean)return;\r\n        if (offset > 100) {\r\n            this.boolean = true;\r\n            this.playerController.jumpMovement();\r\n        }\r\n    }\r\n\r\n    onTouchEnd(event: EventTouch) {\r\n        this.footMotorController.rotateHeadTo90Degrees();\r\n        this.boolean = false;\r\n\r\n    }\r\n\r\n    onTouchCancel(event: EventTouch) {\r\n    }\r\n}\r\n\r\n\r\n"]}