{"version":3,"sources":["file:///D:/cocosProject/footBallGame/game/node_modules/engine.io-client/build/esm/transports/websocket.node.js"],"names":["WS","WebSocket","BaseWS","createSocket","uri","protocols","opts","_a","socket","_cookieJar","headers","cookie","name","cookies","push","value","doWrite","packet","data","options","compress","perMessageDeflate","len","Buffer","byteLength","length","threshold","ws","send"],"mappings":";;;yBAUaA,E;;;;;;AAVJC,MAAAA,S,OAAAA,S;;AACAC,MAAAA,M,gBAAAA,M;;;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;oBACaF,E,GAAN,MAAMA,EAAN,SAAiBE,MAAjB,CAAwB;AAC3BC,QAAAA,YAAY,CAACC,GAAD,EAAMC,SAAN,EAAiBC,IAAjB,EAAuB;AAC/B,cAAIC,EAAJ;;AACA,cAAI,CAACA,EAAE,GAAG,KAAKC,MAAX,MAAuB,IAAvB,IAA+BD,EAAE,KAAK,KAAK,CAA3C,GAA+C,KAAK,CAApD,GAAwDA,EAAE,CAACE,UAA/D,EAA2E;AACvEH,YAAAA,IAAI,CAACI,OAAL,GAAeJ,IAAI,CAACI,OAAL,IAAgB,EAA/B;AACAJ,YAAAA,IAAI,CAACI,OAAL,CAAaC,MAAb,GACI,OAAOL,IAAI,CAACI,OAAL,CAAaC,MAApB,KAA+B,QAA/B,GACM,CAACL,IAAI,CAACI,OAAL,CAAaC,MAAd,CADN,GAEML,IAAI,CAACI,OAAL,CAAaC,MAAb,IAAuB,EAHjC;;AAIA,iBAAK,MAAM,CAACC,IAAD,EAAOD,MAAP,CAAX,IAA6B,KAAKH,MAAL,CAAYC,UAAZ,CAAuBI,OAApD,EAA6D;AACzDP,cAAAA,IAAI,CAACI,OAAL,CAAaC,MAAb,CAAoBG,IAApB,CAA0B,GAAEF,IAAK,IAAGD,MAAM,CAACI,KAAM,EAAjD;AACH;AACJ;;AACD,iBAAO,IAAId,SAAJ,CAAcG,GAAd,EAAmBC,SAAnB,EAA8BC,IAA9B,CAAP;AACH;;AACDU,QAAAA,OAAO,CAACC,MAAD,EAASC,IAAT,EAAe;AAClB,gBAAMZ,IAAI,GAAG,EAAb;;AACA,cAAIW,MAAM,CAACE,OAAX,EAAoB;AAChBb,YAAAA,IAAI,CAACc,QAAL,GAAgBH,MAAM,CAACE,OAAP,CAAeC,QAA/B;AACH;;AACD,cAAI,KAAKd,IAAL,CAAUe,iBAAd,EAAiC;AAC7B,kBAAMC,GAAG,GACT;AACA,yBAAa,OAAOJ,IAApB,GAA2BK,MAAM,CAACC,UAAP,CAAkBN,IAAlB,CAA3B,GAAqDA,IAAI,CAACO,MAF1D;;AAGA,gBAAIH,GAAG,GAAG,KAAKhB,IAAL,CAAUe,iBAAV,CAA4BK,SAAtC,EAAiD;AAC7CpB,cAAAA,IAAI,CAACc,QAAL,GAAgB,KAAhB;AACH;AACJ;;AACD,eAAKO,EAAL,CAAQC,IAAR,CAAaV,IAAb,EAAmBZ,IAAnB;AACH;;AA7B0B,O","sourcesContent":["import { WebSocket } from \"ws\";\nimport { BaseWS } from \"./websocket.js\";\n/**\n * WebSocket transport based on the `WebSocket` object provided by the `ws` package.\n *\n * Usage: Node.js, Deno (compat), Bun (compat)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket\n * @see https://caniuse.com/mdn-api_websocket\n */\nexport class WS extends BaseWS {\n    createSocket(uri, protocols, opts) {\n        var _a;\n        if ((_a = this.socket) === null || _a === void 0 ? void 0 : _a._cookieJar) {\n            opts.headers = opts.headers || {};\n            opts.headers.cookie =\n                typeof opts.headers.cookie === \"string\"\n                    ? [opts.headers.cookie]\n                    : opts.headers.cookie || [];\n            for (const [name, cookie] of this.socket._cookieJar.cookies) {\n                opts.headers.cookie.push(`${name}=${cookie.value}`);\n            }\n        }\n        return new WebSocket(uri, protocols, opts);\n    }\n    doWrite(packet, data) {\n        const opts = {};\n        if (packet.options) {\n            opts.compress = packet.options.compress;\n        }\n        if (this.opts.perMessageDeflate) {\n            const len = \n            // @ts-ignore\n            \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < this.opts.perMessageDeflate.threshold) {\n                opts.compress = false;\n            }\n        }\n        this.ws.send(data, opts);\n    }\n}\n"]}