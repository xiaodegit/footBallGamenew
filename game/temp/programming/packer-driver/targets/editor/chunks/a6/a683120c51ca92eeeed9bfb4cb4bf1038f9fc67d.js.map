{"version":3,"sources":["file:///D:/cocosProject/footBallGame/node_modules/socket.io-client/build/esm/contrib/backo2.js"],"names":["Backoff","opts","ms","min","max","factor","jitter","attempts","prototype","duration","Math","pow","rand","random","deviation","floor","reset","setMin","setMax","setJitter"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,WAASA,OAAT,CAAiBC,IAAjB,EAAuB;AAC1BA,IAAAA,IAAI,GAAGA,IAAI,IAAI,EAAf;AACA,SAAKC,EAAL,GAAUD,IAAI,CAACE,GAAL,IAAY,GAAtB;AACA,SAAKC,GAAL,GAAWH,IAAI,CAACG,GAAL,IAAY,KAAvB;AACA,SAAKC,MAAL,GAAcJ,IAAI,CAACI,MAAL,IAAe,CAA7B;AACA,SAAKC,MAAL,GAAcL,IAAI,CAACK,MAAL,GAAc,CAAd,IAAmBL,IAAI,CAACK,MAAL,IAAe,CAAlC,GAAsCL,IAAI,CAACK,MAA3C,GAAoD,CAAlE;AACA,SAAKC,QAAL,GAAgB,CAAhB;AACH;AACD;AACA;AACA;AACA;AACA;AACA;;;qBAbgBP,O;;;;;AAchBA,MAAAA,OAAO,CAACQ,SAAR,CAAkBC,QAAlB,GAA6B,YAAY;AACrC,YAAIP,EAAE,GAAG,KAAKA,EAAL,GAAUQ,IAAI,CAACC,GAAL,CAAS,KAAKN,MAAd,EAAsB,KAAKE,QAAL,EAAtB,CAAnB;;AACA,YAAI,KAAKD,MAAT,EAAiB;AACb,cAAIM,IAAI,GAAGF,IAAI,CAACG,MAAL,EAAX;AACA,cAAIC,SAAS,GAAGJ,IAAI,CAACK,KAAL,CAAWH,IAAI,GAAG,KAAKN,MAAZ,GAAqBJ,EAAhC,CAAhB;AACAA,UAAAA,EAAE,GAAG,CAACQ,IAAI,CAACK,KAAL,CAAWH,IAAI,GAAG,EAAlB,IAAwB,CAAzB,KAA+B,CAA/B,GAAmCV,EAAE,GAAGY,SAAxC,GAAoDZ,EAAE,GAAGY,SAA9D;AACH;;AACD,eAAOJ,IAAI,CAACP,GAAL,CAASD,EAAT,EAAa,KAAKE,GAAlB,IAAyB,CAAhC;AACH,OARD;AASA;AACA;AACA;AACA;AACA;;;AACAJ,MAAAA,OAAO,CAACQ,SAAR,CAAkBQ,KAAlB,GAA0B,YAAY;AAClC,aAAKT,QAAL,GAAgB,CAAhB;AACH,OAFD;AAGA;AACA;AACA;AACA;AACA;;;AACAP,MAAAA,OAAO,CAACQ,SAAR,CAAkBS,MAAlB,GAA2B,UAAUd,GAAV,EAAe;AACtC,aAAKD,EAAL,GAAUC,GAAV;AACH,OAFD;AAGA;AACA;AACA;AACA;AACA;;;AACAH,MAAAA,OAAO,CAACQ,SAAR,CAAkBU,MAAlB,GAA2B,UAAUd,GAAV,EAAe;AACtC,aAAKA,GAAL,GAAWA,GAAX;AACH,OAFD;AAGA;AACA;AACA;AACA;AACA;;;AACAJ,MAAAA,OAAO,CAACQ,SAAR,CAAkBW,SAAlB,GAA8B,UAAUb,MAAV,EAAkB;AAC5C,aAAKA,MAAL,GAAcA,MAAd;AACH,OAFD","sourcesContent":["/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n"]}