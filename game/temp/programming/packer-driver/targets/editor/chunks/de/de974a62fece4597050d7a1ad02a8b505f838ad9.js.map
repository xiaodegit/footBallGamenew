{"version":3,"sources":["file:///D:/cocosProject/footBallGame/game/assets/core/loginClient.ts"],"names":["_decorator","Component","director","EditBox","clientManager","ccclass","property","socketClient","onLoad","clientmanager","getInstance","constructor","start","console","log","Socket","window","io","on","data","loadScene","onLoginButtonClicked","usernameInput","passwordInput","username","string","password","emit"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAoBC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,O,OAAAA,O;;AACzCC,MAAAA,a,iBAAAA,a;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;8BAGjBO,Y,WADZF,OAAO,CAAC,cAAD,C,UAGHC,QAAQ,CAACH,OAAD,C,UAGRG,QAAQ,CAACH,OAAD,C,2BANb,MACaI,YADb,SACkCN,SADlC,CAC4C;AASlCO,QAAAA,MAAM,GAAS;AAErB,eAAKC,aAAL,GAAqB;AAAA;AAAA,8CAAcC,WAAd,EAArB;AACH;;AACGC,QAAAA,WAAW,GAAG;AACV;;AADU;;AAAA;;AAAA,eALdF,aAKc;AAGb;;AAEDG,QAAAA,KAAK,GAAG;AACJC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKL,aAAjB,EADI,CAGJ;;AACA,eAAKA,aAAL,CAAmBM,MAAnB,GAA6BC,MAAD,CAAgBC,EAAhB,CAAmB,uBAAnB,CAA5B,CAJI,CAMJ;;AACA,eAAKR,aAAL,CAAmBM,MAAnB,CAA0BG,EAA1B,CAA6B,SAA7B,EAAwC,MAAM;AAC1CL,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACH,WAFD,EAPI,CAWJ;;AACA,eAAKL,aAAL,CAAmBM,MAAnB,CAA0BG,EAA1B,CAA6B,cAA7B,EAA8CC,IAAD,IAAe;AACxDN,YAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBK,IAArB;AACAjB,YAAAA,QAAQ,CAACkB,SAAT,CAAmB,MAAnB;AACH,WAHD,EAZI,CAiBJ;;AACA,eAAKX,aAAL,CAAmBM,MAAnB,CAA0BG,EAA1B,CAA6B,cAA7B,EAA8CC,IAAD,IAAe;AACxDN,YAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBK,IAArB;AACH,WAFD;AAGH;;AAEDE,QAAAA,oBAAoB,GAAG;AACnB,cAAI,KAAKC,aAAL,IAAsB,KAAKC,aAA/B,EAA8C;AAC1C,kBAAMC,QAAQ,GAAG,KAAKF,aAAL,CAAmBG,MAApC;AACA,kBAAMC,QAAQ,GAAG,KAAKH,aAAL,CAAmBE,MAApC;AACAZ,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBU,QAAnB;AACAX,YAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBY,QAAlB,EAJ0C,CAM1C;;AACA,iBAAKjB,aAAL,CAAmBM,MAAnB,CAA0BY,IAA1B,CAA+B,OAA/B,EAAwC;AAAEH,cAAAA,QAAF;AAAYE,cAAAA;AAAZ,aAAxC;AACH;AACJ;;AAnDuC,O;;;;;iBAGR,I;;;;;;;iBAGA,I","sourcesContent":["import { _decorator, Button, Component, director, EditBox } from 'cc';\r\nimport { clientManager } from '../managers/clientManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('socketClient')\r\nexport class socketClient extends Component {\r\n\r\n    @property(EditBox)\r\n    usernameInput: EditBox | null = null;\r\n\r\n    @property(EditBox)\r\n    passwordInput: EditBox | null = null;\r\n\r\n    clientmanager!: clientManager;\r\nprotected onLoad(): void {\r\n    \r\n    this.clientmanager = clientManager.getInstance();\r\n}\r\n    constructor() {\r\n        super();\r\n        \r\n    }\r\n\r\n    start() {\r\n        console.log(this.clientmanager);\r\n        \r\n        // 使用全局变量 io 进行连接\r\n        this.clientmanager.Socket = (window as any).io('http://localhost:3000');\r\n\r\n        // 监听连接成功事件\r\n        this.clientmanager.Socket.on('connect', () => {\r\n            console.log('连接到服务器成功');\r\n        });\r\n\r\n        // 监听登录成功事件\r\n        this.clientmanager.Socket.on('loginSuccess', (data: any) => {\r\n            console.log('登录成功:', data);\r\n            director.loadScene('menu')\r\n        });\r\n\r\n        // 监听登录失败事件\r\n        this.clientmanager.Socket.on('loginFailure', (data: any) => {\r\n            console.log('登录失败:', data);\r\n        });\r\n    }\r\n\r\n    onLoginButtonClicked() {\r\n        if (this.usernameInput && this.passwordInput) {\r\n            const username = this.usernameInput.string;\r\n            const password = this.passwordInput.string;\r\n            console.log('用户名', username);\r\n            console.log('密码', password);\r\n\r\n            // 通过 Socket.io 发送登录请求\r\n            this.clientmanager.Socket.emit('login', { username, password });\r\n        }\r\n    }\r\n\r\n}\r\n"]}