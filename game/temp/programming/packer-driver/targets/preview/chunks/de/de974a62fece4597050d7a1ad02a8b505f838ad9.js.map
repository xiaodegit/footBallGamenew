{"version":3,"sources":["file:///D:/cocosProject/footBallGame/game/assets/core/loginClient.ts"],"names":["_decorator","Component","director","EditBox","clientManager","ccclass","property","socketClient","clientmanager","start","getInstance","Socket","window","io","socket","on","console","log","data","loadScene","onLoginButtonClicked","usernameInput","passwordInput","username","string","password","emit"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAoBC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,O,OAAAA,O;;AACzCC,MAAAA,a,iBAAAA,a;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;8BAGjBO,Y,WADZF,OAAO,CAAC,cAAD,C,UAGHC,QAAQ,CAACH,OAAD,C,UAGRG,QAAQ,CAACH,OAAD,C,2BANb,MACaI,YADb,SACkCN,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAQxCO,aARwC;AAAA;;AAUxCC,QAAAA,KAAK,GAAG;AACJ,eAAKD,aAAL,GAAqB;AAAA;AAAA,8CAAcE,WAAd,EAArB,CADI,CAGJ;;AACA,eAAKF,aAAL,CAAmBG,MAAnB,GAA6BC,MAAD,CAAgBC,EAAhB,CAAmB,uBAAnB,CAA5B;AAEA,cAAIC,MAAM,GAAG,KAAKN,aAAL,CAAmBG,MAAhC,CANI,CAOJ;;AACAG,UAAAA,MAAM,CAACC,EAAP,CAAU,SAAV,EAAqB,MAAM;AACvBC,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACH,WAFD,EARI,CAYJ;;AACAH,UAAAA,MAAM,CAACC,EAAP,CAAU,cAAV,EAA2BG,IAAD,IAAe;AACrCF,YAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBC,IAArB;AACAhB,YAAAA,QAAQ,CAACiB,SAAT,CAAmB,MAAnB;AACH,WAHD,EAbI,CAkBJ;;AACAL,UAAAA,MAAM,CAACC,EAAP,CAAU,cAAV,EAA2BG,IAAD,IAAe;AACrCF,YAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBC,IAArB;AACH,WAFD;AAGH;;AAEDE,QAAAA,oBAAoB,GAAG;AACnB,cAAI,KAAKC,aAAL,IAAsB,KAAKC,aAA/B,EAA8C;AAC1C,gBAAMC,QAAQ,GAAG,KAAKF,aAAL,CAAmBG,MAApC;AACA,gBAAMC,QAAQ,GAAG,KAAKH,aAAL,CAAmBE,MAApC;AACAR,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBM,QAAnB;AACAP,YAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBQ,QAAlB,EAJ0C,CAM1C;;AACA,iBAAKjB,aAAL,CAAmBG,MAAnB,CAA0Be,IAA1B,CAA+B,OAA/B,EAAwC;AAAEH,cAAAA,QAAF;AAAYE,cAAAA;AAAZ,aAAxC;AACH;AACJ;;AA5CuC,O;;;;;iBAGR,I;;;;;;;iBAGA,I","sourcesContent":["import { _decorator, Button, Component, director, EditBox } from 'cc';\r\nimport { clientManager } from '../managers/clientManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('socketClient')\r\nexport class socketClient extends Component {\r\n\r\n    @property(EditBox)\r\n    usernameInput: EditBox | null = null;\r\n\r\n    @property(EditBox)\r\n    passwordInput: EditBox | null = null;\r\n\r\n    clientmanager!: clientManager;\r\n    \r\n    start() {\r\n        this.clientmanager = clientManager.getInstance();\r\n\r\n        // 使用全局变量 io 进行连接\r\n        this.clientmanager.Socket = (window as any).io('http://localhost:3000');\r\n\r\n        let socket = this.clientmanager.Socket;\r\n        // 监听连接成功事件\r\n        socket.on('connect', () => {\r\n            console.log('连接到服务器成功');\r\n        });\r\n\r\n        // 监听登录成功事件\r\n        socket.on('loginSuccess', (data: any) => {\r\n            console.log('登录成功:', data);\r\n            director.loadScene('menu')\r\n        });\r\n\r\n        // 监听登录失败事件\r\n        socket.on('loginFailure', (data: any) => {\r\n            console.log('登录失败:', data);\r\n        });\r\n    }\r\n\r\n    onLoginButtonClicked() {\r\n        if (this.usernameInput && this.passwordInput) {\r\n            const username = this.usernameInput.string;\r\n            const password = this.passwordInput.string;\r\n            console.log('用户名', username);\r\n            console.log('密码', password);\r\n\r\n            // 通过 Socket.io 发送登录请求\r\n            this.clientmanager.Socket.emit('login', { username, password });\r\n        }\r\n    }\r\n\r\n}\r\n"]}