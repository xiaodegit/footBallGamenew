{"version":3,"sources":["file:///D:/cocosProject/footBallGame/game/assets/controllers/jointControls/FootMotorController.ts"],"names":["_decorator","Component","HingeJoint2D","Node","ccclass","property","FootMotorController","hingeJoint","bool","start","getComponent","rotateHeadTo90Degrees","update","deltaTime","rotationSpeed","Math","PI","motorSpeed","rotationDuration","scheduleOnce","stopMotor","onRotateButtonPressed"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Y,OAAAA,Y;AAAcC,MAAAA,I,OAAAA,I;;;;;;;;;OACxC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;qCAGjBM,mB,WADZF,OAAO,CAAC,qBAAD,C,UAEHC,QAAQ,CAACF,IAAD,C,2BAFb,MACaG,mBADb,SACyCL,SADzC,CACmD;AAAA;AAAA;;AAAA;;AAAA,eAGvCM,UAHuC,GAGL,IAHK;AAAA,eAI/CC,IAJ+C,GAIhC,KAJgC;AAAA;;AAK/CC,QAAAA,KAAK,GAAG;AACJ,eAAKF,UAAL,GAAkB,KAAKG,YAAL,CAAkBR,YAAlB,CAAlB;AACA,eAAKS,qBAAL;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AACDF,QAAAA,qBAAqB,GAAG;AACpB,cAAG,KAAKH,IAAR,EAAa;;AACb,cAAI,KAAKD,UAAT,EAAqB;AACjB,iBAAKC,IAAL,GAAY,IAAZ,CADiB,CAEjB;;AACA,gBAAMM,aAAa,GAAG,CAAC,EAAD,GAAMC,IAAI,CAACC,EAAX,GAAgB,EAAtC,CAHiB,CAGyB;;AAC1C,iBAAKT,UAAL,CAAgBU,UAAhB,GAA6BH,aAA7B,CAJiB,CAMjB;;AACA,gBAAMI,gBAAgB,GAAG,GAAzB,CAPiB,CAOa;AAE9B;;AACA,iBAAKC,YAAL,CAAkB,MAAM;AACpB,kBAAML,aAAa,GAAG,KAAKC,IAAI,CAACC,EAAV,GAAe,EAArC,CADoB,CACqB;;AACzC,mBAAKT,UAAL,CAAgBU,UAAhB,GAA6BH,aAA7B;AACH,aAHD,EAGGI,gBAHH;AAKA,iBAAKC,YAAL,CAAkB,MAAM;AACpB,mBAAKC,SAAL;AACH,aAFD,EAEGF,gBAAgB,GAAG,CAFtB;AAIH;AACJ,SAnC8C,CAqC/C;;;AACAE,QAAAA,SAAS,GAAG;AACR,cAAI,KAAKb,UAAT,EAAqB;AACjB,iBAAKA,UAAL,CAAgBU,UAAhB,GAA6B,CAA7B,CADiB,CACe;AACnC;;AACD,eAAKT,IAAL,GAAY,KAAZ;AACH,SA3C8C,CA6C/C;;;AACAa,QAAAA,qBAAqB,GAAG;AACpB,eAAKV,qBAAL;AACH;;AAhD8C,O;;;;;iBAElB,I","sourcesContent":["import { _decorator, Component, HingeJoint2D, Node } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('FootMotorController')\r\nexport class FootMotorController extends Component {\r\n    @property(Node)\r\n    connectedNode: Node | null = null;\r\n    private hingeJoint: HingeJoint2D | null = null;\r\n    bool:Boolean = false;\r\n    start() {\r\n        this.hingeJoint = this.getComponent(HingeJoint2D);\r\n        this.rotateHeadTo90Degrees();\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n    rotateHeadTo90Degrees() {\r\n        if(this.bool)return;\r\n        if (this.hingeJoint) {\r\n            this.bool = true;\r\n            // 设置马达速度进行旋转\r\n            const rotationSpeed = -90 * Math.PI / 50; // 每秒旋转 90 度，单位是弧度/秒\r\n            this.hingeJoint.motorSpeed = rotationSpeed;\r\n\r\n            // 计算旋转所需时间（假设需要 1 秒旋转到 90 度）\r\n            const rotationDuration = 0.3; // 1 秒旋转 90 度，您可以根据需要调整\r\n\r\n            // 使用 scheduleOnce 在旋转结束后停止马达\r\n            this.scheduleOnce(() => {\r\n                const rotationSpeed = 90 * Math.PI / 50; // 每秒旋转 90 度，单位是弧度/秒\r\n                this.hingeJoint.motorSpeed = rotationSpeed;\r\n            }, rotationDuration);\r\n\r\n            this.scheduleOnce(() => {\r\n                this.stopMotor();\r\n            }, rotationDuration * 2);\r\n\r\n        }\r\n    }\r\n\r\n    // 停止马达\r\n    stopMotor() {\r\n        if (this.hingeJoint) {\r\n            this.hingeJoint.motorSpeed = 0; // 停止马达旋转\r\n        }\r\n        this.bool = false;\r\n    }\r\n\r\n    // 示例：点击按钮时调用该方法\r\n    onRotateButtonPressed() {\r\n        this.rotateHeadTo90Degrees();\r\n    }\r\n}\r\n\r\n\r\n"]}